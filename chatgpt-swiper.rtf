{\rtf1\ansi\ansicpg936\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\froman\fcharset0 Times-Bold;\f2\fmodern\fcharset0 Courier;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid2\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}}
\paperw11900\paperh16840\margl1440\margr1440\vieww16760\viewh13660\viewkind0
\deftab720
\pard\pardeftab720\sa240\partightenfactor0

\f0\fs24 \cf0 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 import React, \{ useRef, useEffect, useState \} from 'react';\
import \{\
  View,\
  FlatList,\
  StyleSheet,\
  Dimensions,\
  TouchableOpacity,\
  Text,\
  ViewToken,\
\} from 'react-native';\
\
const \{ width: screenWidth \} = Dimensions.get('window');\
\
/**\
 * Props (\uc0\u31616 \u35201 \u35828 \u26126 )\
 * - data: array - \uc0\u36718 \u25773 \u25968 \u25454 \
 * - renderItem: (\{ item, index \}) => ReactNode - \uc0\u28210 \u26579 \u21333 \u39033 \
 * - width: number - \uc0\u27599 \u19968 \u39029 \u23485 \u24230 \u65288 \u40664 \u35748 \u23631 \u24149 \u23485 \u65289 \
 * - height: number - \uc0\u36718 \u25773 \u39640 \u24230 \u65288 \u40664 \u35748  200\u65289 \
 * - autoplay: boolean - \uc0\u26159 \u21542 \u33258 \u21160 \u25773 \u25918 \u65288 \u40664 \u35748  true\u65289 \
 * - interval: number - \uc0\u33258 \u21160 \u25773 \u25918 \u38388 \u38548  ms\u65288 \u40664 \u35748  3000\u65289 \
 * - loop: boolean - \uc0\u26159 \u21542 \u24490 \u29615 \u65288 \u40664 \u35748  true\u65289 \
 * - showPagination: boolean - \uc0\u26159 \u21542 \u26174 \u31034 \u23567 \u22278 \u28857 \u65288 \u40664 \u35748  true\u65289 \
 */\
\
export default function Carousel(\{\
  data = [],\
  renderItem,\
  width = screenWidth,\
  height = 200,\
  autoplay = true,\
  interval = 3000,\
  loop = true,\
  showPagination = true,\
\}) \{\
  // \uc0\u22914 \u26524  data \u20026 \u31354 \u65292 \u28210 \u26579 \u31354 \u23481 \u22120 \
  if (!Array.isArray(data) || data.length === 0) \{\
    return <View style=\{[styles.empty, \{ width, height \}]\} />;\
  \}\
\
  // \uc0\u20026 \u20102 \u23454 \u29616 \u26080 \u32541 \u24490 \u29615 \u65292 \u25105 \u20204 \u22312 \u22836 \u23614 \u21508 \u28155 \u21152 \u19968 \u39033 \u65288 \u22797 \u21046 \u26368 \u21518 \u19968 \u39033 \u21040 \u22836 \u65292 \u22797 \u21046 \u31532 \u19968 \u39033 \u21040 \u23614 \u65289 \
  const extendedData = loop && data.length > 1 ? [data[data.length - 1], ...data, data[0]] : [...data];\
  const flatListRef = useRef(null);\
  const [currentIndex, setCurrentIndex] = useState(loop ? 1 : 0); // \uc0\u24403 \u21069 \u22312  extendedData \u20013 \u30340 \u32034 \u24341 \
  const autoplayTimer = useRef(null);\
\
  // \uc0\u21021 \u27425 \u28210 \u26579 \u26102 \u65292 \u22914 \u26524 \u21551 \u29992 \u24490 \u29615 \u24182 \u19988 \u25968 \u25454 \u36229 \u36807  1 \u39033 \u65292 \u28378 \u21160 \u21040 \u32034 \u24341  1\u65288 \u30495 \u23454 \u31532  0 \u39033 \u65289 \
  useEffect(() => \{\
    if (loop && data.length > 1) \{\
      // \uc0\u31561 \u24453  FlatList \u28210 \u26579 \u23436 \u25104 \u20877 \u28378 \u21160 \
      setTimeout(() => \{\
        flatListRef.current?.scrollToIndex(\{ index: 1, animated: false \});\
      \}, 0);\
    \}\
\
    return () => stopAutoplay();\
    // eslint-disable-next-line react-hooks/exhaustive-deps\
  \}, []);\
\
  // \uc0\u33258 \u21160 \u25773 \u25918 \u36923 \u36753 \
  useEffect(() => \{\
    if (autoplay && data.length > 1) startAutoplay();\
    return () => stopAutoplay();\
    // eslint-disable-next-line react-hooks/exhaustive-deps\
  \}, [autoplay, currentIndex, data]);\
\
  function startAutoplay() \{\
    stopAutoplay();\
    autoplayTimer.current = setInterval(() => \{\
      goToNext();\
    \}, interval);\
  \}\
\
  function stopAutoplay() \{\
    if (autoplayTimer.current) \{\
      clearInterval(autoplayTimer.current);\
      autoplayTimer.current = null;\
    \}\
  \}\
\
  function goToNext() \{\
    if (!flatListRef.current) return;\
    let nextIndex = currentIndex + 1;\
    flatListRef.current.scrollToIndex(\{ index: nextIndex, animated: true \});\
    // setCurrentIndex \uc0\u20250 \u22312  onMomentumScrollEnd \u37324 \u30495 \u27491 \u26356 \u26032 \u24182 \u22788 \u29702 \u36793 \u30028 \
  \}\
\
  // \uc0\u24403 \u28378 \u21160 \u32467 \u26463 \u26102 \u65292 \u35745 \u31639 \u30495 \u23454 \u20301 \u32622 \u24182 \u22788 \u29702 \u24490 \u29615 \u36793 \u30028 \
  function onMomentumScrollEnd(event) \{\
    const offsetX = event.nativeEvent.contentOffset.x;\
    const page = Math.round(offsetX / width);\
\
    // \uc0\u26356 \u26032 \u24403 \u21069 \u32034 \u24341 \u65288 extendedData \u30340 \u32034 \u24341 \u65289 \
    let newIndex = page;\
    const lastExtendedIndex = extendedData.length - 1;\
\
    if (loop && data.length > 1) \{\
      // \uc0\u22914 \u26524 \u28378 \u21040 \u20102 \u31532  0\u65288 \u22797 \u21046 \u30340 \u26368 \u21518 \u19968 \u39033 \u65289 \u65292 \u31435 \u21051 \u26080 \u21160 \u30011 \u36339 \u22238 \u30495 \u23454 \u30340 \u26368 \u21518 \u19968 \u39033 \
      if (newIndex === 0) \{\
        newIndex = data.length; // \uc0\u30495 \u23454 \u26368 \u21518 \u19968 \u39033 \u22312  extendedData \u20013 \u30340 \u20301 \u32622 \
        flatListRef.current?.scrollToIndex(\{ index: newIndex, animated: false \});\
      \}\
\
      // \uc0\u22914 \u26524 \u28378 \u21040 \u20102  extendedData \u30340 \u26368 \u21518 \u19968 \u39033 \u65288 \u22797 \u21046 \u30340 \u31532 \u19968 \u39033 \u65289 \u65292 \u26080 \u21160 \u30011 \u36339 \u22238 \u30495 \u23454 \u31532 \u19968 \u39033 \
      if (newIndex === lastExtendedIndex) \{\
        newIndex = 1;\
        flatListRef.current?.scrollToIndex(\{ index: newIndex, animated: false \});\
      \}\
    \}\
\
    setCurrentIndex(newIndex);\
  \}\
\
  // \uc0\u35302 \u25720 \u26102 \u20572 \u27490 \u33258 \u21160 \u25773 \u25918 \u65288 \u20197 \u20415 \u29992 \u25143 \u33021 \u33258 \u30001 \u28369 \u21160 \u65289 \u65292 \u35302 \u25720 \u32467 \u26463 \u21518 \u24674 \u22797 \
  function handleTouchStart() \{\
    stopAutoplay();\
  \}\
\
  function handleTouchEnd() \{\
    if (autoplay) startAutoplay();\
  \}\
\
  // \uc0\u25226  extendedData \u30340 \u32034 \u24341 \u36716 \u25442 \u20026  data \u30340 \u30495 \u23454 \u32034 \u24341 \u65288 \u29992 \u20110 \u20998 \u39029 \u25351 \u31034 \u65289 \
  function extendedIndexToReal(i) \{\
    if (!loop) return i;\
    // extendedData: [last, 0, 1, ..., n-1, first]\
    if (i === 0) return data.length - 1;\
    if (i === extendedData.length - 1) return 0;\
    return i - 1;\
  \}\
\
  function renderPagination() \{\
    if (!showPagination || data.length <= 1) return null;\
\
    const realIndex = extendedIndexToReal(currentIndex);\
\
    return (\
      <View style=\{styles.pagination\} pointerEvents="none">\
        \{data.map((_, i) => (\
          <View\
            key=\{`dot-$\{i\}`\}\
            style=\{[styles.dot, realIndex === i ? styles.dotActive : null]\}\
          />\
        ))\}\
      </View>\
    );\
  \}\
\
  return (\
    <View style=\{\{ width, height \}\}>\
      <FlatList\
        ref=\{flatListRef\}\
        data=\{extendedData\}\
        horizontal\
        pagingEnabled\
        showsHorizontalScrollIndicator=\{false\}\
        keyExtractor=\{(_, index) => String(index)\}\
        renderItem=\{(\{ item, index \}) => (\
          <TouchableOpacity\
            activeOpacity=\{1\}\
            style=\{\{ width, height \}\}\
            onPress=\{() => \{\
              // \uc0\u29992 \u25143 \u21487 \u33021 \u38656 \u35201 \u30693 \u36947 \u30495 \u23454 \u32034 \u24341 \u65292 \u21487 \u20197 \u22312 \u36825 \u37324 \u22788 \u29702 \u28857 \u20987 \u20107 \u20214 \u25110 \u36890 \u36807  props \u25243 \u20986 \
            \}\}\
            onTouchStart=\{handleTouchStart\}\
            onTouchEnd=\{handleTouchEnd\}\
            onPressIn=\{handleTouchStart\}\
            onPressOut=\{handleTouchEnd\}\
          >\
            \{renderItem(\{ item, index: extendedIndexToReal(index) \})\}\
          </TouchableOpacity>\
        )\}\
        onMomentumScrollEnd=\{onMomentumScrollEnd\}\
        getItemLayout=\{(_, index) => (\{ length: width, offset: width * index, index \})\}\
        initialScrollIndex=\{loop && data.length > 1 ? 1 : 0\}\
      />\
\
      \{renderPagination()\}\
    </View>\
  );\
\}\
\
const styles = StyleSheet.create(\{\
  empty: \{\
    backgroundColor: '#f0f0f0',\
  \},\
  pagination: \{\
    position: 'absolute',\
    bottom: 10,\
    left: 0,\
    right: 0,\
    height: 20,\
    flexDirection: 'row',\
    justifyContent: 'center',\
    alignItems: 'center',\
  \},\
  dot: \{\
    width: 8,\
    height: 8,\
    borderRadius: 4,\
    backgroundColor: 'rgba(255,255,255,0.6)',\
    marginHorizontal: 4,\
  \},\
  dotActive: \{\
    backgroundColor: '#ffffff',\
    transform: [\{ scale: 1.2 \}],\
  \},\
\});\
\
\
\
\uc0\u25105 \u24050 \u25226 \u23436 \u25972 \u30340  
\f1\b React Native \uc0\u24490 \u29615 \u36718 \u25773 \u32452 \u20214 \u65288 Carousel\u65289 
\f0\b0  \uc0\u20195 \u30721 \u25918 \u21040 \u30011 \u24067 \u65288 \u21491 \u20391 \u30340 \u20195 \u30721 \u32534 \u36753 \u22120 \u65289 \u37324 \u65292 \u25991 \u20214 \u21517 \u20026  
\f1\b React Native \uc0\u24490 \u29615 \u36718 \u25773 \u32452 \u20214 \u65288 carousel\u65289 
\f0\b0 \uc0\u12290 \u20320 \u21487 \u20197 \u22312 \u37027 \u36793 \u30452 \u25509 \u26597 \u30475 \u12289 \u22797 \u21046 \u25110 \u20462 \u25913 \u12290 \
\uc0\u24555 \u36895 \u35828 \u26126 \u65288 \u20013 \u25991 \u65289 \u65306 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls1\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u32452 \u20214 \u40664 \u35748 \u23548 \u20986 \u65306 
\f2\fs26 Carousel
\f0\fs24 \uc0\u12290 \
\ls1\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u20027 \u35201  Props\u65306 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls1\ilvl1
\f2\fs26 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 data
\f0\fs24 \uc0\u65306 \u25968 \u32452 \u65292 \u36718 \u25773 \u39033 \u25968 \u25454 \u65288 \u24517 \u20256 \u65289 \u12290 \
\ls1\ilvl1
\f2\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 renderItem
\f0\fs24 \uc0\u65306 \u20989 \u25968 \u65292 \u25509 \u25910  
\f2\fs26 \{ item, index \}
\f0\fs24  \uc0\u36820 \u22238 \u35201 \u28210 \u26579 \u30340  React \u20803 \u32032 \u65288 index \u20026 \u30495 \u23454 \u25968 \u25454 \u32034 \u24341 \u65289 \u12290 \
\ls1\ilvl1
\f2\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 width
\f0\fs24  / 
\f2\fs26 height
\f0\fs24 \uc0\u65306 \u36718 \u25773 \u23610 \u23544 \u65288 \u40664 \u35748 \u23631 \u24149 \u23485 \u24230 \u12289 \u39640 \u24230  200\u65289 \u12290 \
\ls1\ilvl1
\f2\fs26 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 autoplay
\f0\fs24 \uc0\u65288 \u40664 \u35748  
\f2\fs26 true
\f0\fs24 \uc0\u65289 \u12289 
\f2\fs26 interval
\f0\fs24 \uc0\u65288 ms\u65292 \u40664 \u35748  
\f2\fs26 3000
\f0\fs24 \uc0\u65289 \u12289 
\f2\fs26 loop
\f0\fs24 \uc0\u65288 \u40664 \u35748  
\f2\fs26 true
\f0\fs24 \uc0\u65289 \u12289 
\f2\fs26 showPagination
\f0\fs24 \uc0\u65288 \u40664 \u35748  
\f2\fs26 true
\f0\fs24 \uc0\u65289 \u12290 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls1\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u24490 \u29615 \u23454 \u29616 \u65306 \u22312 \u25968 \u25454 \u22836 \u23614 \u20998 \u21035 \u22797 \u21046 \u19968 \u39033 \u65288 \u24120 \u29992 \u30340 \u12300 \u39318 \u23614 \u25193 \u23637 \u12301 \u25216 \u24039 \u65289 \u65292 \u24182 \u22312 \u21040 \u36798 \u36793 \u30028 \u26102 \u26080 \u21160 \u30011 \u36339 \u22238 \u30495 \u23454 \u39033 \u65292 \u20445 \u35777 \u35270 \u35273 \u19978 \u26080 \u32541 \u24490 \u29615 \u12290 \
\ls1\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u25903 \u25345 \u33258 \u21160 \u25773 \u25918 \u12289 \u26242 \u20572 \u65288 \u29992 \u25143 \u35302 \u25720 \u26102 \u33258 \u21160 \u26242 \u20572 \u65289 \u12289 \u20998 \u39029 \u25351 \u31034 \u22120 \u65288 \u23567 \u28857 \u65289 \u12289 \u28857 \u20987 \u21344 \u20301 \u65288 \u21487 \u22312  
\f2\fs26 onPress
\f0\fs24  \uc0\u20013 \u25193 \u23637 \u36923 \u36753 \u65289 \u12290 \
\pard\pardeftab720\sa240\partightenfactor0
\cf0 \uc0\u22914 \u26524 \u20320 \u38656 \u35201 \u25105 \u65306 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls2\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u25226 \u32452 \u20214 \u25913 \u25104  
\f1\b TypeScript
\f0\b0  \uc0\u29256 \u26412 \u65292 \
\ls2\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u22686 \u21152  
\f1\b \uc0\u24038 \u21491 \u31661 \u22836 \u25511 \u21046 
\f0\b0  / 
\f1\b \uc0\u28176 \u21464 \u36807 \u28193 \u65288 Animated\u65289 
\f0\b0  / 
\f1\b \uc0\u25903 \u25345 \u22270 \u29255 \u25042 \u21152 \u36733 
\f0\b0 \uc0\u65292 \
\ls2\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \uc0\u25110 \u32773 \u31034 \u33539 \u19968 \u20010 \u23436 \u25972 \u30340 \u20351 \u29992 \u31034 \u20363 \u65288 \u24102 \u22270 \u29255 \u25968 \u25454 \u21644  
\f2\fs26 renderItem
\f0\fs24  \uc0\u30340 \u23454 \u38469 \u20889 \u27861 \u65289 \u65292 \
\pard\pardeftab720\sa240\partightenfactor0
\cf0 \uc0\u30452 \u25509 \u21578 \u35785 \u25105 \u24819 \u35201 \u21738 \u31181 \u25193 \u23637 \u65292 \u25105 \u20250 \u32487 \u32493 \u25226 \u23545 \u24212 \u20869 \u23481 \u26356 \u26032 \u21040 \u30011 \u24067 \u25991 \u20214 \u37324 \u12290 \
}